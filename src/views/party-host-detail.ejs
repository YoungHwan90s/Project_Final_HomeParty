<h2>íŒŒí‹° ìƒì„¸í˜ì´ì§€ í˜¸ìŠ¤íŠ¸ í™”ë©´</h2>
<div class="party-host-detail-review"></div>
<div class="party-host-detail-review-title">
    <h2> ğŸ‘ë¦¬ë·°</h2>
</div>
<div id="reviews-container">
    <!-- ë¦¬ë·° ë°ì´í„°ê°€ ì¶œë ¥ë  ê³µê°„ -->
  </div>

<!-- <li>
    <div class="party-host-detail-review-form">
        <div class="party-host-detail-review-one">
            <div class="party-title">
                <div class="party-host-detail-review-content">
                    <button type="button" id="review-update">ìˆ˜ì •í•˜ê¸°</button>
                    <button type="button" id="review-delete">ì‚­ì œí•˜ê¸°</button>
                    <div class="party-host-detail-review-userid"></div>
                </div>
            </div>
        </div>
    </div>
</li> -->
<div class="party-host-detail-review-content">
    <div class="review-userId"></div>
    <div class="input-star">
        <span class="star">
          â˜…â˜…â˜…â˜…â˜…
            <span>â˜…â˜…â˜…â˜…â˜…</span>
            <input  type="range" oninput="drawStar(this)" value="1" step="1" min="0" max="10">
          </span>
    </div>
    <textarea id="input-review" class="input-review" >íŒŒí‹° ë¦¬ë·° í•´ì£¼ì„¸ìš”</textarea>
    <button type="button" onclick="review">ë¦¬ë·°ë“±ë¡</button>
</div>
<script>
$(function() {
  // ë³„ì  í‘œì‹œ
  const drawStar = (target) => {
    $('.star span').css({ width: `${target.value * 10}%` });
  }

    // ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
    function review(){
      const partyId = 'íŒŒí‹° ID';
        const reviewadd = $('#input-review').val();//  ë¦¬ë·° ë‚´ìš©
        const rating = $('.input-star input[type="range"]').val(); // ë³„ì 

        $.ajax({
      type: 'POST',
      url: '/review/${partyId}',
      data: {
        reviewadd,
        rating,
        partyId,       
      },
      success: function(response) {
        // ì„œë²„ë¡œë¶€í„° ì‘ë‹µ ë°›ì€ í›„ ì²˜ë¦¬í•  ì½”ë“œ ì‘ì„±
        alert("ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.")
        location.reload();
      },
      error: function(error) {
        // ì„œë²„ë¡œë¶€í„° ì˜¤ë¥˜ ì‘ë‹µ ë°›ì€ í›„ ì²˜ë¦¬í•  ì½”ë“œ ì‘ì„±
        alert("ì˜¬ë°”ë¥´ì§€ì•Šì€ ê°’ì…ë‹ˆë‹¤.")
      }
    });
  };
});

$(document).ready(function() {
  $.ajax({
    url: "/review/:partyId", // ë¦¬ë·° ë°ì´í„° ìš”ì²­ URL
    type: "GET",
    dataType: "json",
    success: function(data) {
      // ë¦¬ë·° ë°ì´í„°ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì¶œë ¥
      var html = "";
      $.each(data, function(index, review) {
        html += "<div class='review'>";
        html += "<h3>" + review.title + "</h3>";
        html += "<p>" + review.content + "</p>";
        html += "<p>ì‘ì„±ì: " + review.user_id + "</p>";
        html += "<p>í‰ì : " + review.rating + "</p>";
        html += "</div>";
      });
      $("#reviews-container").html(html);
    }
  });
});

</script>